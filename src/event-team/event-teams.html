<template>
  <require from="aurelia-bootstrap/tabs/aubs-tab"></require>
  <require from="aurelia-bootstrap/tabs/aubs-tabset"></require>

  <h1> ${event.name} (${event.year})</h1>

  <!--<p> Maybe make a tab for match schedule, and make a tab for team list? </p>-->
  <aubs-tabset active.bind='activeTab'>
    <aubs-tab header='Matches'>
      <table class="table table-hover">
        <tr>
          <th>Match Number</th>
          <th>Blue Alliance (1)</th>
          <th>Blue Alliance (2)</th>
          <th>Blue Alliance (3)</th>
          <th>Red Alliance (1)</th>
          <th>Red Alliance (2)</th>
          <th>Red Alliance (3)</th>
          <th class="options-header">Options</th>  
        </tr>
        <tr repeat.for="eventMatch of eventMatches">
          <td>${eventMatch.matchNumber}</td>
          <td class="blue">
            <a route-href="route.bind:'match-team'; params.bind: {year: event.year, eventCode: event.eventCode, teamNumber: eventMatch.teamNumbers_blue[0], matchNumber: eventMatch.matchNumber}">
              ${eventMatch.teamNumbers_blue[0]}
            </a>
          </td>
          <td class="blue">
            <a route-href="route.bind:'match-team'; params.bind: {year: event.year, eventCode: event.eventCode, teamNumber: eventMatch.teamNumbers_blue[1], matchNumber: eventMatch.matchNumber}">
              ${eventMatch.teamNumbers_blue[1]}
            </a>
          </td>
          <td class="blue">
            <a route-href="route.bind:'match-team'; params.bind: {year: event.year, eventCode: event.eventCode, teamNumber: eventMatch.teamNumbers_blue[2], matchNumber: eventMatch.matchNumber}">
              ${eventMatch.teamNumbers_blue[2]}
            </a>
          </td>
          <td class="red">
            <a route-href="route.bind:'match-team'; params.bind: {year: event.year, eventCode: event.eventCode, teamNumber: eventMatch.teamNumbers_red[0], matchNumber: eventMatch.matchNumber}">
              ${eventMatch.teamNumbers_red[0]}
            </a>
          </td>
          <td class="red">
            <a route-href="route.bind:'match-team'; params.bind: {year: event.year, eventCode: event.eventCode, teamNumber: eventMatch.teamNumbers_red[1], matchNumber: eventMatch.matchNumber}">
              ${eventMatch.teamNumbers_red[1]}
            </a>
          </td>
          <td class="red">
            <a route-href="route.bind:'match-team'; params.bind: {year: event.year, eventCode: event.eventCode, teamNumber: eventMatch.teamNumbers_red[2], matchNumber: eventMatch.matchNumber}">
              ${eventMatch.teamNumbers_red[2]}
            </a>
          </td>
          <td class="options-item"><button class='btn btn-hover btn-danger' click.delegate="remove(eventMatch)">Remove Match</button></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td class="options-item"><button class="btn btn-primary" click.delegate="add()">Add a Match</button></td>
        </tr>
      </table>
    </aubs-tab>
    <aubs-tab header='Teams'>
      <!--<button class='btn btn-primary' click.delegate="addTeam()">Add a Team</button>-->
      <table class="table table-hover">
        <tr>
          <th>Team Number</th>
          <th>Match Participation Count</th>
          <th>Robot Failures</th>
          <th>Scale Capable?</th>
          <th>Switch Capable?</th>
          <th>Vault Capable?</th>
          <th>Foul Count</th>
          <th>Average Cubes Transported</th>
        </tr>
        <tr repeat.for="teamData of teamsData">
          <td><a style="display: block;" route-href="route.bind:'event-team'; params.bind: {year: teamData.year, eventCode: teamData.eventCode, teamNumber: teamData.teamNumber}">
            ${teamData.teamNumber}</a></td>
          <td>${teamData.matchCount}</td>
          <td>${teamData.failureCount}</td>
          <td>${teamData.scale}</td>
          <td>${teamData.switch_cap}</td>
          <td>${teamData.vault}</td>
          <td>${teamData.foulCount}</td>
          <td>${teamData.cubeAverage}</td>
        </tr>
      </table>
    </aubs-tab>
  </aubs-tabset>
</template>
